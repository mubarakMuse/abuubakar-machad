{"ast":null,"code":"var _jsxFileName = \"/Users/mubarakmuse/Abubakar-Islamic-Institute-LMS/frontend/src/pages/LevelPage.js\";\n// Add these imports\nimport { useState } from 'react';\nimport ResponsePopup from '../components/ResponsePopup';\n\n// Add this state to your component\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst [showResponsePopup, setShowResponsePopup] = useState(false);\nconst [selectedUpdateId, setSelectedUpdateId] = useState(null);\nconst [responses, setResponses] = useState([]);\n\n// Add this function to fetch responses\nconst fetchResponses = async updateId => {\n  const {\n    data,\n    error\n  } = await supabase.from('responses').select('*, student:users(name)').eq('update_id', updateId).order('created_at', {\n    ascending: false\n  });\n  if (!error) {\n    setResponses(data);\n  }\n};\n\n// Add this to your update card JSX (inside the map function)\n/*#__PURE__*/_jsxDEV(\"div\", {\n  className: \"bg-white rounded-xl shadow-md overflow-hidden border border-indigo-100 hover:shadow-lg transition-shadow duration-200\",\n  children: /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"p-6\",\n    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-gray-800 whitespace-pre-line leading-relaxed\",\n      children: update.content\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 26,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center gap-2 mt-4 text-sm text-gray-500\",\n      children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n        className: \"h-4 w-4\",\n        fill: \"none\",\n        viewBox: \"0 0 24 24\",\n        stroke: \"currentColor\",\n        children: /*#__PURE__*/_jsxDEV(\"path\", {\n          strokeLinecap: \"round\",\n          strokeLinejoin: \"round\",\n          strokeWidth: \"2\",\n          d: \"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 29,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 28,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        children: new Date(update.created_at).toLocaleDateString('en-US', {\n          weekday: 'long',\n          year: 'numeric',\n          month: 'long',\n          day: 'numeric',\n          hour: '2-digit',\n          minute: '2-digit'\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 31,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 27,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => {\n        setSelectedUpdateId(update.id);\n        setShowResponsePopup(true);\n        fetchResponses(update.id);\n      },\n      className: \"mt-4 px-3 py-1 bg-indigo-100 text-indigo-700 rounded-md text-sm hover:bg-indigo-200 transition-colors\",\n      children: \"Add Response\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 5\n    }, this), responses.filter(r => r.update_id === update.id).length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-4 border-t pt-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        className: \"font-medium text-gray-700 mb-2\",\n        children: \"Responses:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 9\n      }, this), responses.filter(r => r.update_id === update.id).map(response => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-3 last:mb-0 pl-4 border-l-2 border-indigo-200\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center gap-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"font-medium text-gray-900\",\n            children: response.student.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 62,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-xs text-gray-500\",\n            children: new Date(response.created_at).toLocaleString()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"h5\", {\n          className: \"font-medium text-gray-800 mt-1\",\n          children: response.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-600 text-sm mt-1\",\n          children: response.content\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 13\n        }, this)]\n      }, response.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 11\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 25,\n    columnNumber: 3\n  }, this)\n}, update.id, false, {\n  fileName: _jsxFileName,\n  lineNumber: 24,\n  columnNumber: 1\n}, this);\n\n// Add the popup at the bottom of your return","map":{"version":3,"names":["useState","ResponsePopup","jsxDEV","_jsxDEV","showResponsePopup","setShowResponsePopup","selectedUpdateId","setSelectedUpdateId","responses","setResponses","fetchResponses","updateId","data","error","supabase","from","select","eq","order","ascending","className","children","update","content","fileName","_jsxFileName","lineNumber","columnNumber","fill","viewBox","stroke","strokeLinecap","strokeLinejoin","strokeWidth","d","Date","created_at","toLocaleDateString","weekday","year","month","day","hour","minute","onClick","id","filter","r","update_id","length","map","response","student","name","toLocaleString","title"],"sources":["/Users/mubarakmuse/Abubakar-Islamic-Institute-LMS/frontend/src/pages/LevelPage.js"],"sourcesContent":["// Add these imports\nimport { useState } from 'react';\nimport ResponsePopup from '../components/ResponsePopup';\n\n// Add this state to your component\nconst [showResponsePopup, setShowResponsePopup] = useState(false);\nconst [selectedUpdateId, setSelectedUpdateId] = useState(null);\nconst [responses, setResponses] = useState([]);\n\n// Add this function to fetch responses\nconst fetchResponses = async (updateId) => {\n  const { data, error } = await supabase\n    .from('responses')\n    .select('*, student:users(name)')\n    .eq('update_id', updateId)\n    .order('created_at', { ascending: false });\n\n  if (!error) {\n    setResponses(data);\n  }\n};\n\n// Add this to your update card JSX (inside the map function)\n<div key={update.id} className=\"bg-white rounded-xl shadow-md overflow-hidden border border-indigo-100 hover:shadow-lg transition-shadow duration-200\">\n  <div className=\"p-6\">\n    <p className=\"text-gray-800 whitespace-pre-line leading-relaxed\">{update.content}</p>\n    <div className=\"flex items-center gap-2 mt-4 text-sm text-gray-500\">\n      <svg className=\"h-4 w-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z\" />\n      </svg>\n      <span>\n        {new Date(update.created_at).toLocaleDateString('en-US', {\n          weekday: 'long',\n          year: 'numeric',\n          month: 'long',\n          day: 'numeric',\n          hour: '2-digit',\n          minute: '2-digit'\n        })}\n      </span>\n    </div>\n    \n    {/* Add response button */}\n    <button\n      onClick={() => {\n        setSelectedUpdateId(update.id);\n        setShowResponsePopup(true);\n        fetchResponses(update.id);\n      }}\n      className=\"mt-4 px-3 py-1 bg-indigo-100 text-indigo-700 rounded-md text-sm hover:bg-indigo-200 transition-colors\"\n    >\n      Add Response\n    </button>\n    \n    {/* Display responses */}\n    {responses.filter(r => r.update_id === update.id).length > 0 && (\n      <div className=\"mt-4 border-t pt-4\">\n        <h4 className=\"font-medium text-gray-700 mb-2\">Responses:</h4>\n        {responses.filter(r => r.update_id === update.id).map(response => (\n          <div key={response.id} className=\"mb-3 last:mb-0 pl-4 border-l-2 border-indigo-200\">\n            <div className=\"flex items-center gap-2\">\n              <span className=\"font-medium text-gray-900\">{response.student.name}</span>\n              <span className=\"text-xs text-gray-500\">\n                {new Date(response.created_at).toLocaleString()}\n              </span>\n            </div>\n            <h5 className=\"font-medium text-gray-800 mt-1\">{response.title}</h5>\n            <p className=\"text-gray-600 text-sm mt-1\">{response.content}</p>\n          </div>\n        ))}\n      </div>\n    )}\n  </div>\n</div>\n\n// Add the popup at the bottom of your return"],"mappings":";AAAA;AACA,SAASA,QAAQ,QAAQ,OAAO;AAChC,OAAOC,aAAa,MAAM,6BAA6B;;AAEvD;AAAA,SAAAC,MAAA,IAAAC,OAAA;AACA,MAAM,CAACC,iBAAiB,EAAEC,oBAAoB,CAAC,GAAGL,QAAQ,CAAC,KAAK,CAAC;AACjE,MAAM,CAACM,gBAAgB,EAAEC,mBAAmB,CAAC,GAAGP,QAAQ,CAAC,IAAI,CAAC;AAC9D,MAAM,CAACQ,SAAS,EAAEC,YAAY,CAAC,GAAGT,QAAQ,CAAC,EAAE,CAAC;;AAE9C;AACA,MAAMU,cAAc,GAAG,MAAOC,QAAQ,IAAK;EACzC,MAAM;IAAEC,IAAI;IAAEC;EAAM,CAAC,GAAG,MAAMC,QAAQ,CACnCC,IAAI,CAAC,WAAW,CAAC,CACjBC,MAAM,CAAC,wBAAwB,CAAC,CAChCC,EAAE,CAAC,WAAW,EAAEN,QAAQ,CAAC,CACzBO,KAAK,CAAC,YAAY,EAAE;IAAEC,SAAS,EAAE;EAAM,CAAC,CAAC;EAE5C,IAAI,CAACN,KAAK,EAAE;IACVJ,YAAY,CAACG,IAAI,CAAC;EACpB;AACF,CAAC;;AAED;AACA,aAAAT,OAAA;EAAqBiB,SAAS,EAAC,uHAAuH;EAAAC,QAAA,eACpJlB,OAAA;IAAKiB,SAAS,EAAC,KAAK;IAAAC,QAAA,gBAClBlB,OAAA;MAAGiB,SAAS,EAAC,mDAAmD;MAAAC,QAAA,EAAEC,MAAM,CAACC;IAAO;MAAAC,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAI,CAAC,eACrFxB,OAAA;MAAKiB,SAAS,EAAC,oDAAoD;MAAAC,QAAA,gBACjElB,OAAA;QAAKiB,SAAS,EAAC,SAAS;QAACQ,IAAI,EAAC,MAAM;QAACC,OAAO,EAAC,WAAW;QAACC,MAAM,EAAC,cAAc;QAAAT,QAAA,eAC5ElB,OAAA;UAAM4B,aAAa,EAAC,OAAO;UAACC,cAAc,EAAC,OAAO;UAACC,WAAW,EAAC,GAAG;UAACC,CAAC,EAAC;QAA6C;UAAAV,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAE;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAClH,CAAC,eACNxB,OAAA;QAAAkB,QAAA,EACG,IAAIc,IAAI,CAACb,MAAM,CAACc,UAAU,CAAC,CAACC,kBAAkB,CAAC,OAAO,EAAE;UACvDC,OAAO,EAAE,MAAM;UACfC,IAAI,EAAE,SAAS;UACfC,KAAK,EAAE,MAAM;UACbC,GAAG,EAAE,SAAS;UACdC,IAAI,EAAE,SAAS;UACfC,MAAM,EAAE;QACV,CAAC;MAAC;QAAAnB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACE,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACJ,CAAC,eAGNxB,OAAA;MACEyC,OAAO,EAAEA,CAAA,KAAM;QACbrC,mBAAmB,CAACe,MAAM,CAACuB,EAAE,CAAC;QAC9BxC,oBAAoB,CAAC,IAAI,CAAC;QAC1BK,cAAc,CAACY,MAAM,CAACuB,EAAE,CAAC;MAC3B,CAAE;MACFzB,SAAS,EAAC,uGAAuG;MAAAC,QAAA,EAClH;IAED;MAAAG,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAQ,CAAC,EAGRnB,SAAS,CAACsC,MAAM,CAACC,CAAC,IAAIA,CAAC,CAACC,SAAS,KAAK1B,MAAM,CAACuB,EAAE,CAAC,CAACI,MAAM,GAAG,CAAC,iBAC1D9C,OAAA;MAAKiB,SAAS,EAAC,oBAAoB;MAAAC,QAAA,gBACjClB,OAAA;QAAIiB,SAAS,EAAC,gCAAgC;QAAAC,QAAA,EAAC;MAAU;QAAAG,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,EAC7DnB,SAAS,CAACsC,MAAM,CAACC,CAAC,IAAIA,CAAC,CAACC,SAAS,KAAK1B,MAAM,CAACuB,EAAE,CAAC,CAACK,GAAG,CAACC,QAAQ,iBAC5DhD,OAAA;QAAuBiB,SAAS,EAAC,kDAAkD;QAAAC,QAAA,gBACjFlB,OAAA;UAAKiB,SAAS,EAAC,yBAAyB;UAAAC,QAAA,gBACtClB,OAAA;YAAMiB,SAAS,EAAC,2BAA2B;YAAAC,QAAA,EAAE8B,QAAQ,CAACC,OAAO,CAACC;UAAI;YAAA7B,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAO,CAAC,eAC1ExB,OAAA;YAAMiB,SAAS,EAAC,uBAAuB;YAAAC,QAAA,EACpC,IAAIc,IAAI,CAACgB,QAAQ,CAACf,UAAU,CAAC,CAACkB,cAAc,CAAC;UAAC;YAAA9B,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC3C,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACJ,CAAC,eACNxB,OAAA;UAAIiB,SAAS,EAAC,gCAAgC;UAAAC,QAAA,EAAE8B,QAAQ,CAACI;QAAK;UAAA/B,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAK,CAAC,eACpExB,OAAA;UAAGiB,SAAS,EAAC,4BAA4B;UAAAC,QAAA,EAAE8B,QAAQ,CAAC5B;QAAO;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC;MAAA,GARxDwB,QAAQ,CAACN,EAAE;QAAArB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAShB,CACN,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACC,CACN;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACE;AAAC,GAjDEL,MAAM,CAACuB,EAAE;EAAArB,QAAA,EAAAC,YAAA;EAAAC,UAAA;EAAAC,YAAA;AAAA,OAkDd,CAAC;;AAEN","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}