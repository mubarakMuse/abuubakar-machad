{"ast":null,"code":"var _jsxFileName = \"/Users/mubarakmuse/Abubakar-Islamic-Institute-LMS/frontend/src/hooks/useSessionTimeout.js\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst useSessionTimeout = (timeout = 15 * 60 * 1000, warningTime = 1 * 60 * 1000) => {\n  _s();\n  const navigate = useNavigate();\n  const [showWarning, setShowWarning] = useState(false);\n  let logoutTimer, warningTimer;\n  const resetTimer = () => {\n    clearTimeout(logoutTimer);\n    clearTimeout(warningTimer);\n    setShowWarning(false);\n    warningTimer = setTimeout(() => {\n      setShowWarning(true);\n    }, timeout - warningTime); // Show warning before logging out\n\n    logoutTimer = setTimeout(() => {\n      localStorage.removeItem('authToken');\n      localStorage.removeItem('user');\n      navigate('/logout');\n    }, timeout);\n  };\n  useEffect(() => {\n    window.addEventListener('mousemove', resetTimer);\n    window.addEventListener('keypress', resetTimer);\n    window.addEventListener('click', resetTimer);\n    window.addEventListener('scroll', resetTimer);\n    resetTimer();\n    return () => {\n      clearTimeout(logoutTimer);\n      clearTimeout(warningTimer);\n      window.removeEventListener('mousemove', resetTimer);\n      window.removeEventListener('keypress', resetTimer);\n      window.removeEventListener('click', resetTimer);\n      window.removeEventListener('scroll', resetTimer);\n    };\n  }, [navigate, timeout]);\n  return showWarning ? /*#__PURE__*/_jsxDEV(\"p\", {\n    className: \"text-red-500 text-center\",\n    children: \"You will be logged out soon due to inactivity.\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 43,\n    columnNumber: 24\n  }, this) : null;\n};\n_s(useSessionTimeout, \"XE0s2MTgfywYvwgz4oH3dr4N3xE=\", false, function () {\n  return [useNavigate];\n});\nexport default useSessionTimeout;","map":{"version":3,"names":["useEffect","useState","useNavigate","jsxDEV","_jsxDEV","useSessionTimeout","timeout","warningTime","_s","navigate","showWarning","setShowWarning","logoutTimer","warningTimer","resetTimer","clearTimeout","setTimeout","localStorage","removeItem","window","addEventListener","removeEventListener","className","children","fileName","_jsxFileName","lineNumber","columnNumber"],"sources":["/Users/mubarakmuse/Abubakar-Islamic-Institute-LMS/frontend/src/hooks/useSessionTimeout.js"],"sourcesContent":["import { useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\n\nconst useSessionTimeout = (timeout = 15 * 60 * 1000, warningTime = 1 * 60 * 1000) => {\n  const navigate = useNavigate();\n  const [showWarning, setShowWarning] = useState(false);\n  let logoutTimer, warningTimer;\n\n  const resetTimer = () => {\n    clearTimeout(logoutTimer);\n    clearTimeout(warningTimer);\n    setShowWarning(false);\n\n    warningTimer = setTimeout(() => {\n      setShowWarning(true);\n    }, timeout - warningTime); // Show warning before logging out\n\n    logoutTimer = setTimeout(() => {\n      localStorage.removeItem('authToken');\n      localStorage.removeItem('user');\n      navigate('/logout');\n    }, timeout);\n  };\n\n  useEffect(() => {\n    window.addEventListener('mousemove', resetTimer);\n    window.addEventListener('keypress', resetTimer);\n    window.addEventListener('click', resetTimer);\n    window.addEventListener('scroll', resetTimer);\n\n    resetTimer();\n\n    return () => {\n      clearTimeout(logoutTimer);\n      clearTimeout(warningTimer);\n      window.removeEventListener('mousemove', resetTimer);\n      window.removeEventListener('keypress', resetTimer);\n      window.removeEventListener('click', resetTimer);\n      window.removeEventListener('scroll', resetTimer);\n    };\n  }, [navigate, timeout]);\n\n  return showWarning ? <p className=\"text-red-500 text-center\">You will be logged out soon due to inactivity.</p> : null;\n};\n\nexport default useSessionTimeout;\n"],"mappings":";;AAAA,SAASA,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAC3C,SAASC,WAAW,QAAQ,kBAAkB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE/C,MAAMC,iBAAiB,GAAGA,CAACC,OAAO,GAAG,EAAE,GAAG,EAAE,GAAG,IAAI,EAAEC,WAAW,GAAG,CAAC,GAAG,EAAE,GAAG,IAAI,KAAK;EAAAC,EAAA;EACnF,MAAMC,QAAQ,GAAGP,WAAW,CAAC,CAAC;EAC9B,MAAM,CAACQ,WAAW,EAAEC,cAAc,CAAC,GAAGV,QAAQ,CAAC,KAAK,CAAC;EACrD,IAAIW,WAAW,EAAEC,YAAY;EAE7B,MAAMC,UAAU,GAAGA,CAAA,KAAM;IACvBC,YAAY,CAACH,WAAW,CAAC;IACzBG,YAAY,CAACF,YAAY,CAAC;IAC1BF,cAAc,CAAC,KAAK,CAAC;IAErBE,YAAY,GAAGG,UAAU,CAAC,MAAM;MAC9BL,cAAc,CAAC,IAAI,CAAC;IACtB,CAAC,EAAEL,OAAO,GAAGC,WAAW,CAAC,CAAC,CAAC;;IAE3BK,WAAW,GAAGI,UAAU,CAAC,MAAM;MAC7BC,YAAY,CAACC,UAAU,CAAC,WAAW,CAAC;MACpCD,YAAY,CAACC,UAAU,CAAC,MAAM,CAAC;MAC/BT,QAAQ,CAAC,SAAS,CAAC;IACrB,CAAC,EAAEH,OAAO,CAAC;EACb,CAAC;EAEDN,SAAS,CAAC,MAAM;IACdmB,MAAM,CAACC,gBAAgB,CAAC,WAAW,EAAEN,UAAU,CAAC;IAChDK,MAAM,CAACC,gBAAgB,CAAC,UAAU,EAAEN,UAAU,CAAC;IAC/CK,MAAM,CAACC,gBAAgB,CAAC,OAAO,EAAEN,UAAU,CAAC;IAC5CK,MAAM,CAACC,gBAAgB,CAAC,QAAQ,EAAEN,UAAU,CAAC;IAE7CA,UAAU,CAAC,CAAC;IAEZ,OAAO,MAAM;MACXC,YAAY,CAACH,WAAW,CAAC;MACzBG,YAAY,CAACF,YAAY,CAAC;MAC1BM,MAAM,CAACE,mBAAmB,CAAC,WAAW,EAAEP,UAAU,CAAC;MACnDK,MAAM,CAACE,mBAAmB,CAAC,UAAU,EAAEP,UAAU,CAAC;MAClDK,MAAM,CAACE,mBAAmB,CAAC,OAAO,EAAEP,UAAU,CAAC;MAC/CK,MAAM,CAACE,mBAAmB,CAAC,QAAQ,EAAEP,UAAU,CAAC;IAClD,CAAC;EACH,CAAC,EAAE,CAACL,QAAQ,EAAEH,OAAO,CAAC,CAAC;EAEvB,OAAOI,WAAW,gBAAGN,OAAA;IAAGkB,SAAS,EAAC,0BAA0B;IAAAC,QAAA,EAAC;EAA8C;IAAAC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAG,CAAC,GAAG,IAAI;AACxH,CAAC;AAACnB,EAAA,CAxCIH,iBAAiB;EAAA,QACJH,WAAW;AAAA;AAyC9B,eAAeG,iBAAiB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}