{"ast":null,"code":"var _jsxFileName = \"/Users/mubarakmuse/Abubakar-Islamic-Institute-LMS/frontend/src/pages/TeacherUpdateForm.js\",\n  _s = $RefreshSig$();\nimport { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { supabase } from '../lib/supabase';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function UpdatePage() {\n  _s();\n  const {\n    levelId\n  } = useParams();\n  const navigate = useNavigate();\n  const [content, setContent] = useState('');\n  const [levelName, setLevelName] = useState('');\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [error, setError] = useState(null);\n\n  // Fetch level details\n  useEffect(() => {\n    const fetchLevel = async () => {\n      const {\n        data,\n        error\n      } = await supabase.from('levels').select('name').eq('id', levelId).single();\n      if (error) {\n        setError('Failed to load class information');\n        console.error(error);\n      } else {\n        setLevelName(data.name);\n      }\n    };\n    fetchLevel();\n  }, [levelId]);\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setIsSubmitting(true);\n    setError(null);\n    try {\n      // const user = supabase.auth.user();\n      // if (!user) throw new Error('Not authenticated');\n\n      const {\n        error\n      } = await supabase.from('updates').insert([{\n        level_id: levelId,\n        teacher_id: user.id,\n        content: content\n      }]);\n      if (error) throw error;\n\n      // Redirect to level page after successful post\n      navigate(`/level/${levelId}`);\n    } catch (err) {\n      setError(err.message);\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"max-w-2xl mx-auto p-6\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white rounded-lg shadow-md p-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-2xl font-bold text-gray-800 mb-2\",\n        children: [\"Post Update for \", levelName || 'Class']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 9\n      }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-4 p-3 bg-red-50 border-l-4 border-red-500 text-red-700\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"content\",\n            className: \"block text-sm font-medium text-gray-700 mb-2\",\n            children: \"Update Content\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n            id: \"content\",\n            value: content,\n            onChange: e => setContent(e.target.value),\n            className: \"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500\",\n            rows: 6,\n            placeholder: \"What's new in class today?\",\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-end space-x-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            onClick: () => navigate(`/level/${levelId}`),\n            className: \"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\",\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            disabled: isSubmitting,\n            className: `px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ${isSubmitting ? 'opacity-75 cursor-not-allowed' : ''}`,\n            children: isSubmitting ? 'Posting...' : 'Post Update'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 62,\n    columnNumber: 5\n  }, this);\n}\n_s(UpdatePage, \"tTIsKJpLbrMzvNk3HVvCLXEJ59U=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c = UpdatePage;\nvar _c;\n$RefreshReg$(_c, \"UpdatePage\");","map":{"version":3,"names":["useState","useEffect","useParams","useNavigate","supabase","jsxDEV","_jsxDEV","UpdatePage","_s","levelId","navigate","content","setContent","levelName","setLevelName","isSubmitting","setIsSubmitting","error","setError","fetchLevel","data","from","select","eq","single","console","name","handleSubmit","e","preventDefault","insert","level_id","teacher_id","user","id","err","message","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","htmlFor","value","onChange","target","rows","placeholder","required","type","onClick","disabled","_c","$RefreshReg$"],"sources":["/Users/mubarakmuse/Abubakar-Islamic-Institute-LMS/frontend/src/pages/TeacherUpdateForm.js"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport { supabase } from '../lib/supabase';\n\nexport default function UpdatePage() {\n  const { levelId } = useParams();\n  const navigate = useNavigate();\n  const [content, setContent] = useState('');\n  const [levelName, setLevelName] = useState('');\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [error, setError] = useState(null);\n\n  // Fetch level details\n  useEffect(() => {\n    const fetchLevel = async () => {\n      const { data, error } = await supabase\n        .from('levels')\n        .select('name')\n        .eq('id', levelId)\n        .single();\n\n      if (error) {\n        setError('Failed to load class information');\n        console.error(error);\n      } else {\n        setLevelName(data.name);\n      }\n    };\n\n    fetchLevel();\n  }, [levelId]);\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setIsSubmitting(true);\n    setError(null);\n\n    try {\n      // const user = supabase.auth.user();\n      // if (!user) throw new Error('Not authenticated');\n\n      const { error } = await supabase\n        .from('updates')\n        .insert([{\n          level_id: levelId,\n          teacher_id: user.id,\n          content: content\n        }]);\n\n      if (error) throw error;\n\n      // Redirect to level page after successful post\n      navigate(`/level/${levelId}`);\n    } catch (err) {\n      setError(err.message);\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  return (\n    <div className=\"max-w-2xl mx-auto p-6\">\n      <div className=\"bg-white rounded-lg shadow-md p-6\">\n        <h1 className=\"text-2xl font-bold text-gray-800 mb-2\">\n          Post Update for {levelName || 'Class'}\n        </h1>\n        \n        {error && (\n          <div className=\"mb-4 p-3 bg-red-50 border-l-4 border-red-500 text-red-700\">\n            {error}\n          </div>\n        )}\n\n        <form onSubmit={handleSubmit}>\n          <div className=\"mb-6\">\n            <label htmlFor=\"content\" className=\"block text-sm font-medium text-gray-700 mb-2\">\n              Update Content\n            </label>\n            <textarea\n              id=\"content\"\n              value={content}\n              onChange={(e) => setContent(e.target.value)}\n              className=\"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n              rows={6}\n              placeholder=\"What's new in class today?\"\n              required\n            />\n          </div>\n\n          <div className=\"flex justify-end space-x-3\">\n            <button\n              type=\"button\"\n              onClick={() => navigate(`/level/${levelId}`)}\n              className=\"px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\"\n            >\n              Cancel\n            </button>\n            <button\n              type=\"submit\"\n              disabled={isSubmitting}\n              className={`px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 ${isSubmitting ? 'opacity-75 cursor-not-allowed' : ''}`}\n            >\n              {isSubmitting ? 'Posting...' : 'Post Update'}\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n}"],"mappings":";;AAAA,SAASA,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAC3C,SAASC,SAAS,EAAEC,WAAW,QAAQ,kBAAkB;AACzD,SAASC,QAAQ,QAAQ,iBAAiB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAE3C,eAAe,SAASC,UAAUA,CAAA,EAAG;EAAAC,EAAA;EACnC,MAAM;IAAEC;EAAQ,CAAC,GAAGP,SAAS,CAAC,CAAC;EAC/B,MAAMQ,QAAQ,GAAGP,WAAW,CAAC,CAAC;EAC9B,MAAM,CAACQ,OAAO,EAAEC,UAAU,CAAC,GAAGZ,QAAQ,CAAC,EAAE,CAAC;EAC1C,MAAM,CAACa,SAAS,EAAEC,YAAY,CAAC,GAAGd,QAAQ,CAAC,EAAE,CAAC;EAC9C,MAAM,CAACe,YAAY,EAAEC,eAAe,CAAC,GAAGhB,QAAQ,CAAC,KAAK,CAAC;EACvD,MAAM,CAACiB,KAAK,EAAEC,QAAQ,CAAC,GAAGlB,QAAQ,CAAC,IAAI,CAAC;;EAExC;EACAC,SAAS,CAAC,MAAM;IACd,MAAMkB,UAAU,GAAG,MAAAA,CAAA,KAAY;MAC7B,MAAM;QAAEC,IAAI;QAAEH;MAAM,CAAC,GAAG,MAAMb,QAAQ,CACnCiB,IAAI,CAAC,QAAQ,CAAC,CACdC,MAAM,CAAC,MAAM,CAAC,CACdC,EAAE,CAAC,IAAI,EAAEd,OAAO,CAAC,CACjBe,MAAM,CAAC,CAAC;MAEX,IAAIP,KAAK,EAAE;QACTC,QAAQ,CAAC,kCAAkC,CAAC;QAC5CO,OAAO,CAACR,KAAK,CAACA,KAAK,CAAC;MACtB,CAAC,MAAM;QACLH,YAAY,CAACM,IAAI,CAACM,IAAI,CAAC;MACzB;IACF,CAAC;IAEDP,UAAU,CAAC,CAAC;EACd,CAAC,EAAE,CAACV,OAAO,CAAC,CAAC;EAEb,MAAMkB,YAAY,GAAG,MAAOC,CAAC,IAAK;IAChCA,CAAC,CAACC,cAAc,CAAC,CAAC;IAClBb,eAAe,CAAC,IAAI,CAAC;IACrBE,QAAQ,CAAC,IAAI,CAAC;IAEd,IAAI;MACF;MACA;;MAEA,MAAM;QAAED;MAAM,CAAC,GAAG,MAAMb,QAAQ,CAC7BiB,IAAI,CAAC,SAAS,CAAC,CACfS,MAAM,CAAC,CAAC;QACPC,QAAQ,EAAEtB,OAAO;QACjBuB,UAAU,EAAEC,IAAI,CAACC,EAAE;QACnBvB,OAAO,EAAEA;MACX,CAAC,CAAC,CAAC;MAEL,IAAIM,KAAK,EAAE,MAAMA,KAAK;;MAEtB;MACAP,QAAQ,CAAC,UAAUD,OAAO,EAAE,CAAC;IAC/B,CAAC,CAAC,OAAO0B,GAAG,EAAE;MACZjB,QAAQ,CAACiB,GAAG,CAACC,OAAO,CAAC;IACvB,CAAC,SAAS;MACRpB,eAAe,CAAC,KAAK,CAAC;IACxB;EACF,CAAC;EAED,oBACEV,OAAA;IAAK+B,SAAS,EAAC,uBAAuB;IAAAC,QAAA,eACpChC,OAAA;MAAK+B,SAAS,EAAC,mCAAmC;MAAAC,QAAA,gBAChDhC,OAAA;QAAI+B,SAAS,EAAC,uCAAuC;QAAAC,QAAA,GAAC,kBACpC,EAACzB,SAAS,IAAI,OAAO;MAAA;QAAA0B,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACnC,CAAC,EAEJzB,KAAK,iBACJX,OAAA;QAAK+B,SAAS,EAAC,2DAA2D;QAAAC,QAAA,EACvErB;MAAK;QAAAsB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CACN,eAEDpC,OAAA;QAAMqC,QAAQ,EAAEhB,YAAa;QAAAW,QAAA,gBAC3BhC,OAAA;UAAK+B,SAAS,EAAC,MAAM;UAAAC,QAAA,gBACnBhC,OAAA;YAAOsC,OAAO,EAAC,SAAS;YAACP,SAAS,EAAC,8CAA8C;YAAAC,QAAA,EAAC;UAElF;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAO,CAAC,eACRpC,OAAA;YACE4B,EAAE,EAAC,SAAS;YACZW,KAAK,EAAElC,OAAQ;YACfmC,QAAQ,EAAGlB,CAAC,IAAKhB,UAAU,CAACgB,CAAC,CAACmB,MAAM,CAACF,KAAK,CAAE;YAC5CR,SAAS,EAAC,wIAAwI;YAClJW,IAAI,EAAE,CAAE;YACRC,WAAW,EAAC,4BAA4B;YACxCC,QAAQ;UAAA;YAAAX,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACT,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACC,CAAC,eAENpC,OAAA;UAAK+B,SAAS,EAAC,4BAA4B;UAAAC,QAAA,gBACzChC,OAAA;YACE6C,IAAI,EAAC,QAAQ;YACbC,OAAO,EAAEA,CAAA,KAAM1C,QAAQ,CAAC,UAAUD,OAAO,EAAE,CAAE;YAC7C4B,SAAS,EAAC,2LAA2L;YAAAC,QAAA,EACtM;UAED;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC,eACTpC,OAAA;YACE6C,IAAI,EAAC,QAAQ;YACbE,QAAQ,EAAEtC,YAAa;YACvBsB,SAAS,EAAE,iMAAiMtB,YAAY,GAAG,+BAA+B,GAAG,EAAE,EAAG;YAAAuB,QAAA,EAEjQvB,YAAY,GAAG,YAAY,GAAG;UAAa;YAAAwB,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACtC,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACN,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACF,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACJ;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CAAC;AAEV;AAAClC,EAAA,CAzGuBD,UAAU;EAAA,QACZL,SAAS,EACZC,WAAW;AAAA;AAAAmD,EAAA,GAFN/C,UAAU;AAAA,IAAA+C,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}